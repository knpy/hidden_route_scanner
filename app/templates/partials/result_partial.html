{% if warning %}
<div class="card" style="border-color: var(--warning); background: rgba(245, 158, 11, 0.1); margin-bottom: 1rem;">
    <div style="color: var(--warning); display: flex; align-items: center; gap: 0.5rem; padding: 1rem;">
        <span>âš ï¸</span>
        <span>{{ warning }}</span>
    </div>
</div>
{% endif %}

{% if error %}
<div class="card">
    <div class="error">
        <strong>ã‚¨ãƒ©ãƒ¼:</strong> {{ error }}
    </div>
</div>
{% elif result %}
<div class="card result-container">
    <div class="result-header">
        <h2>åˆ†æçµæœ</h2>
        <p class="route">{{ result.route }}</p>
    </div>

    <!-- AI ã«ã‚ˆã‚‹åˆ†æã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <div class="options-section">
        <h3>AI ãŒè¦‹ã¤ã‘ãŸéš ã‚ŒãŸãƒ«ãƒ¼ãƒˆ</h3>
        {% for option in result.hidden_options %}
        <div class="option-card">
            <div class="option-route">{{ option.route }}</div>
            <div class="option-details">
                <span class="price">{{ option.price }}</span>
                <span class="save">{{ option.save }} ç¯€ç´„</span>
            </div>
            {% if option.tips %}
            <div class="option-tips">ğŸ’¡ {{ option.tips }}</div>
            {% endif %}
        </div>
        {% endfor %}
    </div>

    <!-- å®Ÿéš›ã®ãƒ•ãƒ©ã‚¤ãƒˆãƒ‡ãƒ¼ã‚¿ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    {% if result.raw_data and result.raw_data.offers %}
    <div class="real-flights-section"
        style="margin-top: 2rem; border-top: 1px solid var(--border-color); padding-top: 1.5rem;">
        <h3 style="color: var(--text-primary); margin-bottom: 1rem;">å®Ÿéš›ã®æœ€å®‰å€¤ãƒ»å€™è£œãƒ•ãƒ©ã‚¤ãƒˆ</h3>
        <div style="display: grid; gap: 1rem;">
            {% for offer in result.raw_data.offers %}
            <div
                style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px; display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <div style="font-weight: 600;">{{ offer.airline }} ({{ offer.flight_number }})</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">{{ offer.departure_time }} â†’ {{
                        offer.arrival_time }}</div>
                </div>
                <div style="text-align: right;">
                    <div style="color: var(--success); font-weight: 700;">{{ offer.price }} {{ offer.currency }}</div>
                    {% if offer.booking_link %}
                    <a href="{{ offer.booking_link }}" target="_blank"
                        style="font-size: 0.75rem; color: var(--accent-primary); text-decoration: none; border-bottom: 1px solid var(--accent-primary);">äºˆç´„ã‚µã‚¤ãƒˆã¸</a>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
        <p style="font-size: 0.7rem; color: var(--text-secondary); margin-top: 0.8rem; font-style: italic;">Powered by
            {{ result.raw_data.source }}</p>
    </div>
    {% endif %}

    <div class="tips-section">
        <h3>ä¾¡æ ¼æ“ä½œå›é¿ã®ãƒ’ãƒ³ãƒˆ</h3>
        <div class="tips-content">
            {{ result.avoid_tips|safe }}
        </div>
    </div>
</div>
{% endif %}